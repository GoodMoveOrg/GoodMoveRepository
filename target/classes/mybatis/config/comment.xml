<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="comment">
	<select id="getTotalContentCount" resultType="int">
		select count(*)
		from loc_comment
	</select>
	<select id="getCommentList" resultType="commentVO"
		parameterType="pagingBean">
		select * from (select cno, title, hit, to_char(time_posted,'YYYY.MM.DD HH:mm:ss') as
		time_posted, addr, id, content, row_number() over(order by cno desc) as rnum from
		loc_comment) where rnum between #{startRowNumber} and #{endRowNumber}
	</select>
	<select id="showComment" resultType="commentVO" parameterType="int">
		select cno, title, hit, to_char(time_posted,'YYYY.MM.DD HH:mm:ss') as time_posted, addr, id, content
		from loc_comment where cno=#{value}
	</select>
	<update id="updateCount" parameterType="int">
		update loc_comment
		set hit=hit+1 where cno=#{value}
	</update>
	<update id="commentUpdate" parameterType="commentVO">
		update loc_comment
		set
		title=#{title},content=#{content}
		where cno=#{cno}
	</update>
	<insert id="commentRegister" parameterType="commentVO">
		insert into LOC_COMMENT(CNO, TITLE, HIT, TIME_POSTED, ADDR, ID, CONTENT) VALUES(C_SEQ.nextval, #{title}, '0', sysdate, #{addr}, #{id}, #{content});
	</insert>
</mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
















