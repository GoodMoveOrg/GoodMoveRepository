<?xml version="1.0" encoding="UTF-8"?>
<!-- Sql Mapper -->
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="delivery">
	<sql id="selectDelivery">
		select id,name,password,tel,is_deleted from delivery
	</sql>
	<select id="login" resultType="deliveryVO" parameterType="deliveryVO">
		<include refid="selectDelivery"></include>
		where id=#{id} and password=#{password} and is_deleted='NO'
	</select>
	<select id="getMemberCount" resultType="int">
		select count(*) from
		delivery
	</select>
	<insert id="register" parameterType="deliveryVO">
		insert into
		delivery(id,name,password,tel)
		values(#{id},#{name},#{password},#{tel})
	</insert>
	<select id="idcheck" resultType="int">
		select count(*) from delivery
		where id=#{id}
	</select>
	<select id="passwordCheck" resultType="int">
		select count(*) from
		delivery where PASSWORD=#{value}
	</select>
	<update id="deleteMember" parameterType="deliveryVO">
		update delivery set
		is_deleted='yes' where id=#{id} and password=#{password}
	</update>
	<update id="convertDoneState" parameterType="hashMap">
		update application
		set
		is_done =#{state} where id=#{id} and bno = #{bno}
	</update>
	<!-- 승인 된 용달 리스트 -->
	<select id = "getAllDeliveryList" resultType="applicationVO">
		select * from application where is_selected='SELECTED' and is_delivery='YES' and is_done='NO'
	</select>
	<!-- 미승인된 용달 리스트 -->
	<select id = "getNotConfirmedDeliveryList" resultType="deliveryVO">
		select * from delivery where is_confirmed='NO' and is_deleted='NO'
	</select>
	<update id="confirmDelivery" parameterType="deliveryVO">
		update delivery set is_confirmed='YES' where id=#{id}
	</update>
	<select id="selectRecieverById" parameterType="string" resultType="memberVO">
		select id,name,addr,addr_detail,tel from GD_MEMBER where id=#{value}
	</select>
	<select id="selectGiverByBno" parameterType="string" resultType="memberVO">
		select id,name,addr,addr_detail,tel from GD_MEMBER
		where id = (select id from G_BOARD where bno=#{value})
	</select>
</mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
















